import{_ as V,u as N}from"./_plugin-vue_export-helper-DgNkAkTE.js";import{r as g,c as C,a as T,b as l,d as t,e as o,f as v,p as D,q as x,s as a,i as I,t as b,j as d}from"./index-GaIkwbhd.js";import{s as j}from"./function-call-DU70Nmmr.js";const E={class:"setting-view"},F={class:"stats-info"},J={class:"stat-row"},O={class:"stat-value"},z={class:"stat-row"},q={class:"stat-value"},H={class:"stat-row"},K={class:"stat-value"},L={class:"popup-content"},M={class:"popup-body"},R={class:"popup-footer"},G={class:"popup-content"},P={class:"popup-body"},Q={class:"popup-footer"},W={__name:"SettingView",setup(X){const p=N(),f=g(!1),m=g(!1),c=g(null),S=C(()=>p.statistics),A=C(()=>{const e=JSON.stringify(p.records),s=new Blob([e]).size;return s<1024?`${s} B`:s<1024*1024?`${(s/1024).toFixed(2)} KB`:`${(s/(1024*1024)).toFixed(2)} MB`}),w=e=>{if(p.records.length===0){a("暂无数据可导出");return}try{p.exportData(e)?a({message:"导出成功",icon:"success"}):a({message:"导出失败",icon:"fail"})}catch(s){a({message:"导出失败："+s.message,icon:"fail"})}},U=()=>{c.value?.click()},B=async e=>{const s=e.target.files?.[0];if(s){D({message:"导入中...",forbidClick:!0,duration:0});try{const n=await s.text(),u=p.importData(n);x(),u?a({message:"导入成功",icon:"success"}):a({message:"导入失败，请检查文件格式",icon:"fail"})}catch(n){x(),a({message:"导入失败："+n.message,icon:"fail"})}e.target.value=""}},$=async()=>{try{await j({title:"警告",message:"确定要清空所有数据吗？此操作不可恢复！",confirmButtonText:"确定清空",cancelButtonText:"取消"}),p.clearAll()?a({message:"已清空所有数据",icon:"success"}):a({message:"操作失败",icon:"fail"})}catch{}};return(e,s)=>{const n=v("van-cell"),u=v("van-cell-group"),r=v("van-divider"),k=v("van-button"),y=v("van-popup");return I(),T("div",E,[l(u,{inset:"",class:"data-stats"},{default:o(()=>[l(n,{title:"数据统计",icon:"bar-chart-o",border:!1},{label:o(()=>[t("div",F,[t("div",J,[s[8]||(s[8]=t("span",{class:"stat-label"},"总记录数：",-1)),t("span",O,b(S.value.recordedDays)+" 条",1)]),t("div",z,[s[9]||(s[9]=t("span",{class:"stat-label"},"平均分：",-1)),t("span",q,b(S.value.avgScore)+" 分",1)]),t("div",H,[s[10]||(s[10]=t("span",{class:"stat-label"},"数据大小：",-1)),t("span",K,b(A.value),1)])])]),_:1})]),_:1}),l(u,{inset:"",class:"standard-section"},{default:o(()=>[l(n,{title:"评分标准说明",icon:"info-o","is-link":"",onClick:s[0]||(s[0]=i=>f.value=!0)})]),_:1}),l(u,{inset:"",class:"data-management"},{default:o(()=>[l(n,{title:"数据管理",icon:"orders-o",border:!1}),l(n,{title:"导出为JSON",icon:"down","is-link":"",onClick:s[1]||(s[1]=i=>w("json"))},{label:o(()=>[...s[11]||(s[11]=[t("span",{class:"cell-desc"},"导出所有数据为JSON格式，便于备份",-1)])]),_:1}),l(n,{title:"导出为CSV",icon:"description","is-link":"",onClick:s[2]||(s[2]=i=>w("csv"))},{label:o(()=>[...s[12]||(s[12]=[t("span",{class:"cell-desc"},"导出为CSV格式，可在Excel中打开",-1)])]),_:1}),l(n,{title:"导入数据",icon:"upgrade","is-link":"",onClick:U},{label:o(()=>[...s[13]||(s[13]=[t("span",{class:"cell-desc"},"从备份文件中恢复数据",-1)])]),_:1}),l(n,{title:"清空所有数据",icon:"delete-o","is-link":"",onClick:$},{label:o(()=>[...s[14]||(s[14]=[t("span",{class:"cell-desc"},"删除所有记录，此操作不可恢复",-1)])]),_:1})]),_:1}),l(u,{inset:"",class:"about-section"},{default:o(()=>[l(n,{title:"关于应用",icon:"info-o",border:!1}),l(n,{title:"应用名称",value:"荨麻疹活动度评分"}),l(n,{title:"版本号",value:"v1.0.0"}),l(n,{title:"使用说明","is-link":"",onClick:s[3]||(s[3]=i=>m.value=!0)})]),_:1}),l(y,{show:f.value,"onUpdate:show":s[5]||(s[5]=i=>f.value=i),round:"",position:"bottom",style:{height:"70%"}},{default:o(()=>[t("div",L,[s[28]||(s[28]=t("div",{class:"popup-header"},[t("h3",null,"荨麻疹活动度评分标准（UAS7）")],-1)),t("div",M,[l(r,{"content-position":"left"},{default:o(()=>[...s[15]||(s[15]=[d("风团数量评分",-1)])]),_:1}),s[18]||(s[18]=t("div",{class:"standard-item"},[t("div",{class:"score-badge"},"0分"),t("div",{class:"score-desc"},"无风团")],-1)),s[19]||(s[19]=t("div",{class:"standard-item"},[t("div",{class:"score-badge"},"1分"),t("div",{class:"score-desc"},"轻度：少于20个风团/24小时")],-1)),s[20]||(s[20]=t("div",{class:"standard-item"},[t("div",{class:"score-badge"},"2分"),t("div",{class:"score-desc"},"中度：20-50个风团/24小时")],-1)),s[21]||(s[21]=t("div",{class:"standard-item"},[t("div",{class:"score-badge"},"3分"),t("div",{class:"score-desc"},"重度：大于50个风团/24小时或大片融合区域")],-1)),l(r,{"content-position":"left"},{default:o(()=>[...s[16]||(s[16]=[d("瘙痒程度评分",-1)])]),_:1}),s[22]||(s[22]=t("div",{class:"standard-item"},[t("div",{class:"score-badge"},"0分"),t("div",{class:"score-desc"},"无瘙痒")],-1)),s[23]||(s[23]=t("div",{class:"standard-item"},[t("div",{class:"score-badge"},"1分"),t("div",{class:"score-desc"},"轻度：存在，但不引起烦躁或麻烦")],-1)),s[24]||(s[24]=t("div",{class:"standard-item"},[t("div",{class:"score-badge"},"2分"),t("div",{class:"score-desc"},"中度：有麻烦，但不影响日常生活及睡眠")],-1)),s[25]||(s[25]=t("div",{class:"standard-item"},[t("div",{class:"score-badge"},"3分"),t("div",{class:"score-desc"},"重度：严重瘙痒，明显影响日常生活及睡眠")],-1)),l(r,{"content-position":"left"},{default:o(()=>[...s[17]||(s[17]=[d("UAS7 评分说明",-1)])]),_:1}),s[26]||(s[26]=t("div",{class:"uas7-info"},[t("p",null,"• UAS7 = 连续7天的每日评分总和"),t("p",null,"• 每日评分 = 风团数量评分 + 瘙痒程度评分（0-6分）"),t("p",null,"• UAS7 总分范围：0-42分"),t("p",null,"• UAS7 < 7分：病情控制良好"),t("p",null,"• UAS7 7-15分：轻度活动"),t("p",null,"• UAS7 16-27分：中度活动"),t("p",null,"• UAS7 > 27分：重度活动")],-1))]),t("div",R,[l(k,{type:"primary",block:"",onClick:s[4]||(s[4]=i=>f.value=!1)},{default:o(()=>[...s[27]||(s[27]=[d(" 我知道了 ",-1)])]),_:1})])])]),_:1},8,["show"]),l(y,{show:m.value,"onUpdate:show":s[7]||(s[7]=i=>m.value=i),round:"",position:"bottom",style:{height:"70%"}},{default:o(()=>[t("div",G,[s[49]||(s[49]=t("div",{class:"popup-header"},[t("h3",null,"使用说明")],-1)),t("div",P,[l(r,{"content-position":"left"},{default:o(()=>[...s[29]||(s[29]=[d("记录页面",-1)])]),_:1}),s[33]||(s[33]=t("p",null,"1. 选择日期，默认为今天",-1)),s[34]||(s[34]=t("p",null,"2. 根据当天症状，分别选择风团数量和瘙痒程度评分",-1)),s[35]||(s[35]=t("p",null,"3. 可添加备注记录特殊情况",-1)),s[36]||(s[36]=t("p",null,"4. 点击保存按钮完成记录",-1)),l(r,{"content-position":"left"},{default:o(()=>[...s[30]||(s[30]=[d("历史记录",-1)])]),_:1}),s[37]||(s[37]=t("p",null,"1. 查看所有历史记录",-1)),s[38]||(s[38]=t("p",null,"2. 可按时间范围筛选（本周/本月/全部）",-1)),s[39]||(s[39]=t("p",null,"3. 点击记录可以编辑",-1)),s[40]||(s[40]=t("p",null,"4. 左滑记录可以删除",-1)),l(r,{"content-position":"left"},{default:o(()=>[...s[31]||(s[31]=[d("统计图表",-1)])]),_:1}),s[41]||(s[41]=t("p",null,"1. 查看不同时间段的评分趋势",-1)),s[42]||(s[42]=t("p",null,"2. 对比风团数量和瘙痒程度变化",-1)),s[43]||(s[43]=t("p",null,"3. 查看UAS7周期评分统计",-1)),s[44]||(s[44]=t("p",null,"4. 分析病情严重程度分布",-1)),l(r,{"content-position":"left"},{default:o(()=>[...s[32]||(s[32]=[d("数据管理",-1)])]),_:1}),s[45]||(s[45]=t("p",null,"1. 定期导出数据进行备份",-1)),s[46]||(s[46]=t("p",null,"2. 可将数据分享给医生查看",-1)),s[47]||(s[47]=t("p",null,"3. 更换设备时可通过导入恢复数据",-1))]),t("div",Q,[l(k,{type:"primary",block:"",onClick:s[6]||(s[6]=i=>m.value=!1)},{default:o(()=>[...s[48]||(s[48]=[d(" 我知道了 ",-1)])]),_:1})])])]),_:1},8,["show"]),t("input",{ref_key:"fileInput",ref:c,type:"file",accept:".json",style:{display:"none"},onChange:B},null,544)])}}},h=V(W,[["__scopeId","data-v-eb8e1a1c"]]);export{h as default};
